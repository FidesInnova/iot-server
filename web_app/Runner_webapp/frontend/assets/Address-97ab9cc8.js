import{j as e,r as u,u as b,a9 as S}from"./index-bf8a941f.js";import{I as p}from"./Input-9402e44f.js";import{t as g,N as v}from"./toast-c77230e6.js";import{F}from"./FormContainer-7c6e47ec.js";import{F as N}from"./FormDesription-3c4296f2.js";import{F as n}from"./FormRow-31162199.js";import{c as q,a as c,F as A,b as H,d as l}from"./index.esm-510ed08c.js";import{S as P,T as _,U as E,V as y,W as D}from"./index.esm-4fe97196.js";import{a as R,c as U}from"./UserApi-a54a968c.js";import{c as w}from"./countrys-06199e16.js";import"./Alert-1d842e79.js";import"./Tag-338a2893.js";import"./Badge-b1f0ab32.js";import{B as z}from"./Button-0f33c8fd.js";import"./index-6975cd84.js";import"./Card-24bc2910.js";import"./index-9cb1fb6e.js";import"./Skeleton-67f3ebea.js";import"./Switcher-2f2e5a73.js";import"./index-8128ce47.js";import"./index-754123b4.js";import"./index-6728dd01.js";import{S as L}from"./Select-d53c46ac.js";import"./index-de79736a.js";import"./index-18669cea.js";import"./index-0a71f11b.js";import"./Upload-cf8abc1c.js";import"./RichTextEditor-3ec4d100.js";import"./Views-4bab5f03.js";import"./ServiceAPI-25e2710b.js";import"./SegmentItemOption-48394355.js";import"./SvgIcon-51ef36c9.js";import"./context-3c7bf7d8.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./motion-23928477.js";import"./StatusIcon-0225b6e9.js";import"./CloseButton-d50c43fd.js";import"./index-2e58d6d9.js";import"./usePopper-113fdeb0.js";import"./index-a2b882c4.js";import"./useControllableState-1a7323ea.js";import"./cloneDeep-93156ba4.js";import"./index-13a8329a.js";import"./index-346a9733.js";import"./useThemeClass-81aec1c2.js";function O(r){const m=[];return r.forEach(a=>{m.push({label:a.name,value:a.name})}),m}const Z=O(w),B=({selectedCountry:r,setSelectedCountry:m})=>{const a=d=>{m(d)};return e.jsx(L,{id:"country-selector",value:r,onChange:a,options:Z})},G=q().shape({name:c().required("Home name is required"),line_1:c().required("Line 1 is required"),line_2:c(),city:c().required("City is required"),state:c().required("State is required"),zipCode:c().required("Zip Code is required")}),Ue=()=>{const[r,m]=u.useState(),[a,d]=u.useState(),[j,h]=u.useState(!0);u.useEffect(()=>{async function o(){var f;h(!0);const t=(await R()).data.data;m(t),(f=t==null?void 0:t.address)!=null&&f.country&&d({label:t.address.country,value:t.address.country}),h(!1)}o()},[]);const{_id:x}=b(o=>o.auth.user),C=async(o,i)=>{i(!0);const t={...r,address:{...o,country:a.label}};await U((x==null?void 0:x.toString())||"",t),g.push(e.jsx(v,{title:"Address updated",type:"success"}),{placement:"top-center"}),i(!1),console.log("values",t)};return e.jsx(A,{enableReinitialize:!0,initialValues:(r==null?void 0:r.address)||{},validationSchema:G,onSubmit:(o,{setSubmitting:i})=>{C(o,i)},children:({touched:o,errors:i,isSubmitting:t,resetForm:f})=>{const s={touched:o,errors:i};return e.jsx(H,{children:j==!1&&e.jsxs(F,{children:[e.jsx(N,{className:"mt-8",title:"Personal",desc:"Your personal information that is hidden"}),e.jsx(n,{name:"name",label:"Home name",...s,children:e.jsx(l,{type:"text",autoComplete:"off",name:"name",placeholder:"Enter home name",component:p,prefix:e.jsx(P,{className:"text-xl"})})}),e.jsx(n,{name:"line_1",label:"Address line 1",...s,children:e.jsx(l,{type:"text",autoComplete:"off",name:"line_1",placeholder:"Street address, P.O. box, company name, c/o",component:p,prefix:e.jsx(_,{className:"text-xl"})})}),e.jsx(n,{name:"line_2",label:"Address line 2 (optional)",...s,children:e.jsx(l,{type:"text",autoComplete:"off",name:"line_2",placeholder:"Apartment, suite, unit, building, floor, etc.",component:p,prefix:e.jsx(E,{className:"text-xl"})})}),e.jsx(n,{name:"country",label:"Country",...s,children:e.jsx(l,{readOnly:!0,type:"text",autoComplete:"off",name:"country",placeholder:"Country",component:B,selectedCountry:a,setSelectedCountry:d})}),e.jsx(n,{name:"city",label:"City",...s,children:e.jsx(l,{type:"text",autoComplete:"off",name:"city",placeholder:"City",component:p,prefix:e.jsx(y,{className:"text-xl"})})}),e.jsx(n,{name:"state",label:"State/Province/Region",...s,children:e.jsx(l,{type:"text",name:"state",placeholder:"State/Province/Region",component:p,prefix:e.jsx(y,{className:"text-xl"})})}),e.jsx(n,{name:"zipCode",label:"Zip Code",...s,children:e.jsx(l,{type:"text",autoComplete:"off",name:"zipCode",placeholder:"Zip Code",component:p,prefix:e.jsx(D,{className:"text-xl"})})}),e.jsx("div",{className:"mt-4 ltr:text-right",children:e.jsx(z,{variant:"solid",loading:t,type:"submit",children:t?"Updating":"Update"})})]})||e.jsx("div",{className:"w-full h-[60dvh]",children:e.jsx(S,{loading:!0})})})}})};export{Ue as default};

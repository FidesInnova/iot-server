import{am as V,j as e,r as n,aP as _,c as L}from"./index-bf8a941f.js";import{h as q}from"./cloneDeep-93156ba4.js";import{B as Q}from"./Button-0f33c8fd.js";import{C as W}from"./CloseButton-d50c43fd.js";import{t as X,N as ee}from"./toast-c77230e6.js";function le(a){return V({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.85 4.44l-3.28-3.3-.35-.14H2.5l-.5.5V7h1V2h6v3.5l.5.5H13v1h1V4.8l-.15-.36zM10 5V2l3 3h-3zM2.5 8l-.5.5v6l.5.5h11l.5-.5v-6l-.5-.5h-11zM13 13v1H3V9h10v4zm-8-1h-.32v1H4v-3h1.06c.75 0 1.13.36 1.13 1a.94.94 0 0 1-.32.72A1.33 1.33 0 0 1 5 12zm-.06-1.45h-.26v.93h.26c.36 0 .54-.16.54-.47 0-.31-.18-.46-.54-.46zM9 12.58a1.48 1.48 0 0 0 .44-1.12c0-1-.53-1.46-1.6-1.46H6.78v3h1.06A1.6 1.6 0 0 0 9 12.58zm-1.55-.13v-1.9h.33a.94.94 0 0 1 .7.25.91.91 0 0 1 .25.67 1 1 0 0 1-.25.72.94.94 0 0 1-.69.26h-.34zm4.45-.61h-.97V13h-.68v-3h1.74v.55h-1.06v.74h.97v.55z"}}]})(a)}function se(a){return V({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 1h11l.5.5v5l-.15.35-.85.86v6.79l-.5.5h-10l-.5-.5v-13l.5-.5zM6 2H5v2h1V2zm0 12h4V7.68l-.85-.85L9 6.47V2H7v2.5l-.5.5H6v1H5V5h-.5L4 4.5V2H3v12h2v-1h1v1zm0-2v1h1v-1H6zm0-1v1H5v-1h1zm0-1h1v1H6v-1zm0-1v1H5V9h1zm0-1h1v1H6V8zm0-1v1H5V7h1zm0 0h1V6H6v1zm6.15.15l.85-.86V2h-3v4.27l.85.85.15.35V14h1V7.5l.15-.35z"}}]})(a)}function ae(a){return V({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.71 4.29l-3-3L10 1H4L3 2v12l1 1h9l1-1V5l-.29-.71zM13 14H4V2h5v4h4v8zm-3-9V2l3 3h-3z"}}]})(a)}const te=1e3,re=a=>Math.round(a/te),z=({children:a})=>e.jsx("span",{className:"text-4xl",children:a}),M=a=>{const{file:o,children:u}=a,{type:c,name:r,size:t}=o,d=()=>c.split("/")[0]==="image"?e.jsx("img",{className:"upload-file-image",src:URL.createObjectURL(o),alt:`file preview ${r}`}):c==="application/zip"?e.jsx(z,{children:e.jsx(se,{})}):c==="application/pdf"?e.jsx(z,{children:e.jsx(le,{})}):e.jsx(z,{children:e.jsx(ae,{})});return e.jsxs("div",{className:"upload-file",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"upload-file-thumbnail",children:d()}),e.jsxs("div",{className:"upload-file-info",children:[e.jsx("h6",{className:"upload-file-name",children:r}),e.jsxs("span",{className:"upload-file-size",children:[re(t)," kb"]})]})]}),u]})};M.displayName="UploadFileItem";const k=a=>Object.keys(a).map(o=>a[o]),ie=n.forwardRef((a,o)=>{const{accept:u,beforeUpload:c,disabled:r=!1,draggable:t=!1,fileList:d=[],multiple:N,onChange:v,onFileRemove:m,showList:U=!0,tip:R,uploadLimit:p,children:g,className:D,field:O,...b}=a,C=n.useRef(null),[h,x]=n.useState(d),[B,j]=n.useState(!1),{themeColor:I,primaryColorLevel:w}=_();n.useEffect(()=>{JSON.stringify(h)!==JSON.stringify(d)&&x(d)},[d]);const H=(s="")=>{X.push(e.jsx(ee,{type:"danger",duration:2e3,children:s||"Upload Failed!"}),{placement:"top-center"})},F=(s,l)=>{if(s)for(const i of s)l.push(i);return l},E=s=>{let l=q(h);return typeof p=="number"&&p!==0&&Object.keys(l).length>=p?(p===1&&(l.shift(),l=F(s,l)),k({...l})):(l=F(s,l),k({...l}))},P=s=>{const{files:l}=s.target;let i=!0;if(c){if(i=c(l,h),i===!1){H();return}if(typeof i=="string"&&i.length>0){H(i);return}}if(i){const f=E(l);x(f),v==null||v(s,f,h)}},S=s=>{const l=h.filter((i,f)=>f!==s);x(l),m==null||m(l)},$=s=>{var l;r||(l=C.current)==null||l.click(),s.stopPropagation()},A=()=>!t&&!g?e.jsx(Q,{disabled:r,onClick:s=>s.preventDefault(),children:"Upload"}):t&&!g?e.jsx("span",{children:"Choose a file or drag and drop here"}):g,T=n.useCallback(()=>{t&&j(!1)},[t]),J=n.useCallback(()=>{t&&!r&&j(!0)},[t,r]),G=n.useCallback(()=>{t&&j(!1)},[t]),K={onDragLeave:T,onDragOver:J,onDrop:G},y=`border-${I}-${w}`,Y=L("upload",t&&"upload-draggable",t&&!r&&`hover:${y}`,t&&r&&"disabled",B&&y,D),Z=L("upload-input",t&&"draggable");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:o,className:Y,...t?K:{onClick:$},...b,children:[e.jsx("input",{ref:C,className:Z,type:"file",disabled:r,multiple:N,accept:u,title:"",value:"",onChange:P,...O,...b}),A()]}),R,U&&e.jsx("div",{className:"upload-file-list",children:h.map((s,l)=>e.jsx(M,{file:s,children:e.jsx(W,{className:"upload-file-remove",onClick:()=>S(l)})},s.name+l))})]})});ie.displayName="Upload";export{ie as U};

import{j as e,am as S,a as C,r as u,a9 as v,q as T,al as k}from"./index-bf8a941f.js";import{u as x,t as h,d as P,g as A,r as L}from"./index-67a7497f.js";import{A as R}from"./AdaptableCard-05107d22.js";import{a as O}from"./useGetDevices-5b0f46be.js";import{T as y}from"./index-de79736a.js";import{u as H,f,g as M,a as B}from"./index-346a9733.js";import{A as d}from"./Tag-338a2893.js";import{t as E,u as $,r as I,v as z,w as K}from"./index.esm-4fe97196.js";import{u as F}from"./useThemeClass-81aec1c2.js";import{t as G,N as U}from"./toast-c77230e6.js";import{B as j}from"./Button-0f33c8fd.js";import{D as V}from"./Skeleton-67f3ebea.js";import{a as q}from"./DeviceApi-c140c236.js";import"./Card-24bc2910.js";import"./Badge-b1f0ab32.js";import"./RichTextEditor-3ec4d100.js";import"./Views-4bab5f03.js";import"./Input-9402e44f.js";import"./ServiceAPI-25e2710b.js";import"./SegmentItemOption-48394355.js";import"./SvgIcon-51ef36c9.js";import"./usePopper-113fdeb0.js";import"./index-a2b882c4.js";import"./index-2e58d6d9.js";import"./motion-23928477.js";import"./StatusIcon-0225b6e9.js";import"./CloseButton-d50c43fd.js";import"./context-3c7bf7d8.js";import"./index-13a8329a.js";import"./Select-d53c46ac.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./index-9cb1fb6e.js";import"./cloneDeep-93156ba4.js";const _=({status:r})=>{switch(r){case"info":return e.jsx(d,{className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(z,{})})});case"success":return e.jsx(d,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(I,{})})});case"warning":return e.jsx(d,{className:"text-amber-600 bg-amber-100 dark:text-amber-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx($,{})})});case"danger":return e.jsx(d,{className:"text-red-600 bg-red-100 dark:text-red-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(E,{})})});default:return null}},W=r=>{const{type:a="info",title:n,children:i,onCancel:o,onConfirm:c,cancelText:l="Cancel",confirmText:g="Confirm",confirmButtonColor:m,...s}=r,t=()=>{o==null||o()},p=()=>{c==null||c()};return e.jsxs(V,{contentClassName:"pb-0 px-0",...s,children:[e.jsxs("div",{className:"px-6 pb-6 pt-2 flex",children:[e.jsx("div",{children:e.jsx(_,{status:a})}),e.jsxs("div",{className:"ml-4 rtl:mr-4",children:[e.jsx("h5",{className:"mb-2",children:n}),i]})]}),e.jsxs("div",{className:"text-right px-6 py-3 bg-gray-100 dark:bg-gray-700 rounded-bl-lg rounded-br-lg",children:[e.jsx(j,{size:"sm",className:"ltr:mr-2 rtl:ml-2",onClick:t,children:l}),e.jsx(j,{size:"sm",variant:"solid",color:m,onClick:p,children:g})]})]})},Y=()=>e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center"});function J(r){return S({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(r)}const Q=()=>{const r=C(),a=x(l=>l.salesProductList.data.deleteConfirmation),n=x(l=>l.salesProductList.data.selectedProduct),i=x(l=>l.salesProductList.data.tableData),o=()=>{r(h(!1))},c=async()=>{r(h(!1)),await P({id:n})&&(r(A(i)),G.push(e.jsx(U,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Product successfuly deleted"}),{placement:"top-center"}))};return e.jsx(W,{isOpen:a,type:"danger",title:"Delete product",confirmButtonColor:"red-600",onClose:o,onRequestClose:o,onCancel:o,onConfirm:c,children:e.jsx("p",{children:"Are you sure you want to delete this product? All record related to this product will be deleted as well. This action cannot be undone."})})},X=({row:r})=>{C(),F();const a=T(),n=()=>{a(`/devices/${r._id}`)};return e.jsx("div",{className:"flex justify-end text-lg",children:e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:n,children:e.jsx(K,{})})})},Z=({row:r})=>{const a=e.jsx(d,{icon:e.jsx(J,{})});return e.jsxs("div",{className:"flex items-center",children:[a,e.jsx("span",{className:"ml-2 rtl:mr-2 font-semibold",children:r.deviceName})]})},{Tr:b,Th:ee,Td:te,THead:se,TBody:re,Sorter:ae}=y,oe=()=>{const[r,a]=u.useState([]),[n,i]=u.useState([]),[o,c]=u.useState(!0),{_id:l}=x(s=>s.auth.user);u.useEffect(()=>{async function s(){const t=await q(l||"");c(!1),i(t==null?void 0:t.data.data)}s()},[]);const m=H({data:n,columns:[{header:"Name",accessorKey:"deviceName",cell:s=>{const t=s.row.original;return e.jsx(Z,{row:t})}},{header:"Device Type",accessorKey:"deviceType",cell:s=>{const t=s.row.original;return e.jsx("span",{className:"capitalize",children:t.deviceType})}},{header:"Use Cost",accessorKey:"costOfUse",cell:s=>{const{costOfUse:t}=s.row.original;return e.jsxs("span",{children:["$",t]})}},{header:"Creation Date",accessorKey:"insertDate",enableSorting:!1,cell:s=>{const t=new Date(s.row.original.insertDate),p=t.getFullYear(),N=t.getMonth()+1,D=t.getDate(),w=`${p}-${N.toString().padStart(2,"0")}-${D.toString().padStart(2,"0")}`;return e.jsx("span",{children:w})}},{header:"",id:"action",cell:s=>e.jsx(X,{row:s.row.original})}],state:{sorting:r},onSortingChange:a,getCoreRowModel:M(),getSortedRowModel:B()});return e.jsxs(e.Fragment,{children:[o===!1&&e.jsxs(y,{children:[e.jsx(se,{children:m.getHeaderGroups().map(s=>e.jsx(b,{children:s.headers.map(t=>e.jsx(ee,{colSpan:t.colSpan,children:t.isPlaceholder?null:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:[f(t.column.columnDef.header,t.getContext()),t.column.getCanSort()&&e.jsx(ae,{sort:t.column.getIsSorted()})]})},t.id))},s.id))}),e.jsx(re,{children:m.getRowModel().rows.slice(0,10).map(s=>e.jsx(b,{children:s.getVisibleCells().map(t=>e.jsx(te,{children:f(t.column.columnDef.cell,t.getContext())},t.id))},s.id))})]})||e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(v,{loading:!0})}),o===!1&&n.length===0&&e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx("h1",{children:"Data not found !"})}),e.jsx(Q,{})]})};k("salesProductList",L);const le=()=>{const{status:r}=O(),a=r!=="success";return a?e.jsx(v,{loading:a}):e.jsxs(R,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Device List"}),e.jsx(Y,{})]}),e.jsx(oe,{})]})},Ke=le;export{Ke as default};

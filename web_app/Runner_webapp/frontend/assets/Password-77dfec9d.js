import{r as f,j as s,a$ as x}from"./index-bf8a941f.js";import{I as t}from"./Input-9402e44f.js";import{B as u}from"./Button-0f33c8fd.js";import{t as n,N as d}from"./toast-c77230e6.js";import{F as j}from"./FormContainer-7c6e47ec.js";import{F as y}from"./FormDesription-3c4296f2.js";import{F as i}from"./FormRow-31162199.js";import{c as C,a as p,f as F,F as N,b as E,d as m}from"./index.esm-510ed08c.js";import{a as g,d as b}from"./UserApi-a54a968c.js";import"./context-3c7bf7d8.js";import"./Views-4bab5f03.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./motion-23928477.js";import"./StatusIcon-0225b6e9.js";import"./index.esm-4fe97196.js";import"./CloseButton-d50c43fd.js";import"./index-2e58d6d9.js";const k=C().shape({password:p().required("Password Required"),newPassword:p().required("Enter your new password").matches(/^[A-Za-z0-9_-]*$/,"Only Letters & Numbers Allowed"),confirmNewPassword:p().required("Enter your confirm password").oneOf([F("newPassword"),""],"Password not match")}),J=()=>{const[c,P]=f.useState({});f.useEffect(()=>{async function e(){const r=await g();P(r.data.data),console.log(r.data.data)}e()},[]);const h=async(e,r)=>{var a,w;if(r(!0),((a=(await x({enteredPassword:e.password,userPassword:c.password})).data)==null?void 0:a.data)===!1)return n.push(s.jsx(d,{title:"Invalid credentials",type:"danger"}),{placement:"top-center"}),r(!1),!1;(w=(await b(c.email,e.confirmNewPassword)).data)!=null&&w.success?n.push(s.jsx(d,{title:"Password updated",type:"success"}),{placement:"top-center"}):n.push(s.jsx(d,{title:"Error while updating password",type:"danger"}),{placement:"top-center"}),r(!1),console.log("values",e)};return s.jsx(s.Fragment,{children:s.jsx(N,{initialValues:{password:"",newPassword:"",confirmNewPassword:""},validationSchema:k,onSubmit:(e,{setSubmitting:r})=>{h(e,r)},children:({touched:e,errors:r,isSubmitting:o,resetForm:l})=>{const a={touched:e,errors:r};return s.jsx(E,{children:s.jsxs(j,{children:[s.jsx(y,{title:"Password",desc:"Enter your current & new password to reset your password"}),s.jsx(i,{name:"password",label:"Current Password",...a,children:s.jsx(m,{type:"password",autoComplete:"off",name:"password",placeholder:"Current Password",component:t})}),s.jsx(i,{name:"newPassword",label:"New Password",...a,children:s.jsx(m,{type:"password",autoComplete:"off",name:"newPassword",placeholder:"New Password",component:t})}),s.jsx(i,{name:"confirmNewPassword",label:"Confirm Password",...a,children:s.jsx(m,{type:"password",autoComplete:"off",name:"confirmNewPassword",placeholder:"Confirm Password",component:t})}),s.jsxs("div",{className:"mt-4 ltr:text-right",children:[s.jsx(u,{className:"ltr:mr-2 rtl:ml-2",type:"button",onClick:()=>l(),children:"Reset"}),s.jsx(u,{variant:"solid",loading:o,type:"submit",children:o?"Updating":"Update Password"})]})]})})}})})};export{J as default};

import{v as F,r as p,j as e}from"./index-bf8a941f.js";import{F as I,a as d}from"./FormContainer-7c6e47ec.js";import{I as C}from"./Input-9402e44f.js";import{B as P}from"./Button-0f33c8fd.js";import{A as U}from"./Alert-1d842e79.js";import{P as v}from"./PasswordInput-352f6c8c.js";import{u as E,A as M}from"./useTimeOutMessage-855ac3e9.js";import{c as k,a as h,f as N,F as R,b as H,d as w}from"./index.esm-510ed08c.js";import"./context-3c7bf7d8.js";import"./index-2e58d6d9.js";import"./motion-23928477.js";import"./Views-4bab5f03.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./StatusIcon-0225b6e9.js";import"./index.esm-4fe97196.js";import"./CloseButton-d50c43fd.js";import"./useThemeClass-81aec1c2.js";const q=k().shape({email:h().email("Invalid email").required("Please enter your email"),password:h().required("Please enter your password"),confirmPassword:h().oneOf([N("password")],"Your passwords do not match").required("Please enter your confirm password"),captcha:h()}),A=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let r=0;r<6;r++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},$=(t,n)=>{const a=t.getContext("2d");if(!a)return;const r=5,i=25;a.clearRect(0,0,t.width,t.height),a.fillStyle="white",a.font="20px Arial",a.fillText(n,r,i);const l=a.measureText(n).width;a.strokeStyle="black",a.beginPath(),a.moveTo(r,i-8),a.lineTo(r+l,i-7),a.stroke()},B=t=>{const{disableSubmit:n=!1,className:a,signInUrl:r="/sign-in"}=t,{signUp:i}=F(),[l,g]=E(),[c,b]=p.useState(A()),[j,y]=p.useState(""),f=p.useRef(null);p.useEffect(()=>{f.current&&c&&$(f.current,c)},[c]);const S=async(o,s)=>{const{password:m,email:u}=o;s(!0);const x=await i({email:u,password:m});(x==null?void 0:x.status)==="failed"&&g("Error: User with this email exist !"),s(!1)},T=()=>{b(A())};return e.jsxs("div",{className:a,children:[l&&e.jsx(U,{showIcon:!0,className:"mb-4",type:"danger",children:l}),e.jsx(R,{initialValues:{password:"",confirmPassword:"",email:"",captcha:""},validationSchema:q,onSubmit:(o,{setSubmitting:s})=>{!n&&j===c?S(o,s):(s(!1),g("Please enter the correct CAPTCHA"))},children:({touched:o,errors:s,isSubmitting:m})=>e.jsx(H,{children:e.jsxs(I,{children:[e.jsx(d,{label:"Email",invalid:s.email&&o.email,errorMessage:s.email,children:e.jsx(w,{type:"email",autoComplete:"off",name:"email",placeholder:"Email",component:C})}),e.jsx(d,{label:"Password",invalid:s.password&&o.password,errorMessage:s.password,children:e.jsx(w,{autoComplete:"off",name:"password",placeholder:"Password",component:v})}),e.jsx(d,{label:"Confirm Password",invalid:s.confirmPassword&&o.confirmPassword,errorMessage:s.confirmPassword,children:e.jsx(w,{autoComplete:"off",name:"confirmPassword",placeholder:"Confirm Password",component:v})}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("canvas",{ref:f,width:"175",height:"40"}),e.jsx(P,{variant:"default",type:"button",onClick:T,children:"Regenerate CAPTCHA"})]}),e.jsx(d,{label:"Enter CAPTCHA",invalid:s.captcha&&o.captcha,errorMessage:s.captcha,children:e.jsx(C,{type:"text",autoComplete:"off",name:"captcha",placeholder:"Enter CAPTCHA",value:j,onChange:u=>y(u.target.value)})}),e.jsx(P,{block:!0,loading:m,variant:"solid",type:"submit",children:m?"Creating Account...":"Sign Up"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Already have an account? "}),e.jsx(M,{to:r,children:"Sign in"})]})]})})})]})},L=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-1",children:"Sign Up"}),e.jsx("p",{children:"lets get started with your free trial"})]}),e.jsx(B,{disableSubmit:!1})]}),oe=L;export{oe as default};

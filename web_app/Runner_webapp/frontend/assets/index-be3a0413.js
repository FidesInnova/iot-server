import{r as j,j as e,aQ as u,aR as P}from"./index-bf8a941f.js";import{F as y,a as i}from"./FormContainer-7c6e47ec.js";import{I as n}from"./Input-9402e44f.js";import{B as F}from"./Button-0f33c8fd.js";import{A as C}from"./Alert-1d842e79.js";import{u as b,A as g}from"./useTimeOutMessage-855ac3e9.js";import{c as v,a as t,f as E,F as N,b as R,d as l}from"./index.esm-510ed08c.js";import"./context-3c7bf7d8.js";import"./index-2e58d6d9.js";import"./motion-23928477.js";import"./Views-4bab5f03.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./StatusIcon-0225b6e9.js";import"./index.esm-4fe97196.js";import"./CloseButton-d50c43fd.js";import"./useThemeClass-81aec1c2.js";const k=v().shape({email:t().required("Please enter your email"),newPassword:t().required("Enter your new password").matches(/^[A-Za-z0-9_-]*$/,"Only Letters & Numbers Allowed"),newPasswordConfirm:t().required("Enter your confirm password").oneOf([E("newPassword"),""],"Password not match")}),A=p=>{const{disableSubmit:I=!1,className:w,signInUrl:f="/sign-in"}=p,[o,m]=j.useState(!1),[d,h]=b(),x=async(a,s)=>{var r;s(!0);try{const c=await u(a.email);if(s(!1),(r=c.data)!=null&&r.data){const $=await P(a.email,a.newPassword);m(!0)}}catch{h("Email not found"),s(!1)}};return e.jsxs("div",{className:w,children:[e.jsx("div",{className:"mb-6",children:o?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-1",children:"Check your email"}),e.jsx("p",{children:"We have sent a password recovery instruction to your email"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-1",children:"Forgot Password"}),e.jsx("p",{children:"Please enter your email address to receive a verification code"})]})}),d&&e.jsx(C,{showIcon:!0,className:"mb-4",type:"danger",children:d}),e.jsx(N,{enableReinitialize:!0,initialValues:{email:"",newPassword:"",newPasswordConfirm:""},validationSchema:k,onSubmit:(a,{setSubmitting:s})=>{o?(m(!1),s(!1)):x(a,s)},children:({touched:a,errors:s,isSubmitting:r})=>e.jsx(R,{children:e.jsxs(y,{children:[e.jsxs("div",{className:o?"hidden":"",children:[e.jsx(i,{invalid:s.email&&a.email,errorMessage:s.email,children:e.jsx(l,{type:"email",autoComplete:"off",name:"email",disabled:r,placeholder:"email@example.com",component:n})}),e.jsx(i,{invalid:s.newPassword&&a.newPassword,errorMessage:s.newPassword,children:e.jsx(l,{type:"password",autoComplete:"off",name:"newPassword",disabled:r,placeholder:"New password",component:n})}),e.jsx(i,{invalid:s.newPasswordConfirm&&a.newPasswordConfirm,errorMessage:s.newPasswordConfirm,children:e.jsx(l,{type:"password",autoComplete:"off",name:"newPasswordConfirm",disabled:r,placeholder:"Re-Enter new password",component:n})})]}),e.jsx(F,{block:!0,loading:r,variant:"solid",type:"submit",children:o?"Resend Email":"Send Email"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Back to "}),e.jsx(g,{to:f,children:"Sign in"})]})]})})})]})},M=()=>e.jsx(A,{disableSubmit:!1}),K=M;export{K as default};

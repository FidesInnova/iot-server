import{r as a,j as e,u as g,a9 as N}from"./index-bf8a941f.js";import{g as S,h as y}from"./ServiceAPI-25e2710b.js";import{C as w}from"./Card-24bc2910.js";import"./Badge-b1f0ab32.js";import"./RichTextEditor-3ec4d100.js";import"./Tag-338a2893.js";import{B as u}from"./Button-0f33c8fd.js";import{D as I}from"./Skeleton-67f3ebea.js";import"./Views-4bab5f03.js";import"./Input-9402e44f.js";import{a as b}from"./DeviceApi-c140c236.js";import"./SegmentItemOption-48394355.js";import"./SvgIcon-51ef36c9.js";import"./Alert-1d842e79.js";import"./index-6975cd84.js";import"./index-9cb1fb6e.js";import"./Switcher-2f2e5a73.js";import"./index-8128ce47.js";import"./FormContainer-7c6e47ec.js";import"./index-754123b4.js";import"./toast-c77230e6.js";import"./index-6728dd01.js";import"./Select-d53c46ac.js";import"./index-de79736a.js";import"./index-18669cea.js";import"./index-0a71f11b.js";import"./Upload-cf8abc1c.js";import{I as C}from"./ImageWithFallBack-a6a1ee24.js";import"./index-a2b882c4.js";import"./index-346a9733.js";import"./index.esm-4fe97196.js";import"./usePopper-113fdeb0.js";import"./index-2e58d6d9.js";import"./motion-23928477.js";import"./context-3c7bf7d8.js";import"./index-13a8329a.js";import"./CloseButton-d50c43fd.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./useThemeClass-81aec1c2.js";import"./StatusIcon-0225b6e9.js";import"./useControllableState-1a7323ea.js";import"./cloneDeep-93156ba4.js";const D=({serviceId:r,className:d,name:i,type:o,description:m,serviceImage:l,refresh:p,deviceName:h,deviceMac:s})=>{const[c,f]=a.useState(!1),[x,t]=a.useState(!1),n=async()=>{f(!0),await S(r),p()},j=e.jsx("div",{className:"flex items-center gap-2 justify-center",children:e.jsx(u,{loading:c,variant:"solid",size:"sm",onClick:()=>t(!0),children:"Uninstall"})}),v=e.jsx("div",{className:"flex card-header-svg items-center justify-center rounded-tl-lg rounded-tr-lg overflow-hidden",children:e.jsx(C,{src:l&&l||"/img/others/img-1.jpg",alt:"card header"})});return e.jsxs("div",{className:`max-w-xs ${d}`,children:[e.jsxs(I,{isOpen:x,onClose:()=>t(!1),contentClassName:"w-1/3 h-1/3",closable:!1,children:[e.jsx("h3",{className:"mb-8",children:"Delete Confirm"}),e.jsxs("h4",{className:"mb-6 text-center",children:['Are you sure you want to delete the "',i,'" Service ?']}),e.jsxs("div",{className:"flex justify-center w-3/5 justify-between mx-auto",children:[e.jsx(u,{className:"px-6",variant:"solid",color:"red",size:"sm",onClick:n,loading:c,children:"Delete"}),e.jsx(u,{className:"px-6",variant:"solid",color:"green",size:"sm",onClick:()=>t(!1),children:"Cancel"})]})]}),e.jsxs(w,{clickable:!0,className:"w-[300px] hover:shadow-lg transition duration-150 ease-in-out dark:border dark:border-gray-600 dark:border-solid",header:v,footer:j,headerClass:"p-0",footerBorder:!1,headerBorder:!1,children:[e.jsx("span",{className:"text-emerald-600 font-semibold",children:o}),e.jsx("h4",{className:"font-bold my-3",children:i}),e.jsxs("p",{children:["Device Name: ",e.jsx("strong",{children:h})]}),e.jsxs("p",{children:["Device Mac: ",e.jsx("strong",{children:s})]}),e.jsx("div",{className:"h-16 pt-4 line-clamp-4",children:m})]})]})},k=()=>{const[r,d]=a.useState([]),{_id:i}=g(s=>s.auth.user),[o,m]=a.useState(!0),[l,p]=a.useState(0);function h(){p(l+1)}return a.useEffect(()=>{(async()=>{try{let f=(await y(i||"")).data;const x=await b(i||"");d(f.data.map(t=>(x.data.data.forEach(n=>{n.deviceEncryptedId==t.deviceMap.MULTI_SENSOR_1&&(t.deviceName=n.deviceName,t.mac=n.mac)}),t)))}catch(c){console.error("Error fetching installed services:",c)}m(!1)})()},[l]),e.jsxs("div",{children:[e.jsx("div",{className:"w-full flex justify-between pb-4",children:e.jsx("h3",{className:"",children:"Installed Services"})}),e.jsx("div",{className:"grid xl:grid-cols-3",children:o===!1&&(r==null?void 0:r.map(s=>e.jsx(D,{serviceId:s._id,className:"mt-8 mx-auto",name:s.installedServiceName,description:s.description,type:s.activationStatus,installationPrice:s.installationPrice,serviceImage:s.installedServiceImage,deviceName:s.deviceName,deviceMac:s.mac,refresh:h})))}),o===!0&&e.jsx("div",{className:"w-full h-[80vh] flex justify-center items-center",children:e.jsx(N,{loading:!0})}),o===!1&&r.length===0&&e.jsx("div",{className:"w-full h-[80vh] flex justify-center items-center",children:e.jsx("h1",{children:"Data not found !"})})]})},ve=k;export{ve as default};

import{r as M,j as e,S as H,g as b,N as K,e as L,f as T,c as w,H as V,D as C,h as D,u as c,i as E,k as $}from"./index-bf8a941f.js";import{n as _,b as O,A as P,c as g,d as F,u as B,H as U,M as G,N as W,U as Y}from"./Notification-7527a328.js";import{S as z}from"./SidePanel-f07e57d5.js";import{L as q}from"./Logo-c40c2ccd.js";import{M as k}from"./index-754123b4.js";import{S as I}from"./index-8128ce47.js";import{u as J,V as Q}from"./VerticalMenuContent-8d672e06.js";import{i as A,V as X}from"./Views-4bab5f03.js";import{B as Z}from"./Button-0f33c8fd.js";import{H as ee,a as te}from"./index.esm-4fe97196.js";import"./Select-d53c46ac.js";import"./get-9e555ae1.js";import"./_MapCache-72043566.js";import"./motion-23928477.js";import"./context-3c7bf7d8.js";import"./Alert-1d842e79.js";import"./StatusIcon-0225b6e9.js";import"./CloseButton-d50c43fd.js";import"./Tag-338a2893.js";import"./usePopper-113fdeb0.js";import"./index-a2b882c4.js";import"./index-2e58d6d9.js";import"./Badge-b1f0ab32.js";import"./index-6975cd84.js";import"./useControllableState-1a7323ea.js";import"./Input-9402e44f.js";import"./Card-24bc2910.js";import"./index-9cb1fb6e.js";import"./cloneDeep-93156ba4.js";import"./Skeleton-67f3ebea.js";import"./index-13a8329a.js";import"./Switcher-2f2e5a73.js";import"./FormContainer-7c6e47ec.js";import"./toast-c77230e6.js";import"./index-6728dd01.js";import"./index-de79736a.js";import"./index-18669cea.js";import"./index-0a71f11b.js";import"./Upload-cf8abc1c.js";import"./UserApi-a54a968c.js";import"./isLastChild-83eb4c23.js";import"./useThemeClass-81aec1c2.js";import"./NotificationService-d9ca097f.js";import"./Card-82839b3d.js";import"./ServiceAPI-25e2710b.js";import"./RichTextEditor-3ec4d100.js";import"./index-346a9733.js";import"./SegmentItemOption-48394355.js";import"./SvgIcon-51ef36c9.js";import"./ImageWithFallBack-a6a1ee24.js";import"./DoubleSidedImage-5799e7a3.js";import"./isPlainObject-7f2e0dea.js";const se=p=>{const{navMode:i,onChange:o,routeKey:h,activeKeys:m,onSetActiveKey:d,userAuthority:n,mode:l,direction:u,...a}=p,{includedRouteTree:r}=J(_,h),y=()=>i===K?L:i===T?l:i,j=({key:s,title:N,menu:S,translateKey:v})=>{o({title:N,menu:S,translateKey:v}),d([s])},f=({key:s})=>{o({}),d([s])};return M.useEffect(()=>{r.type!==O&&!A(r)&&o({key:r.key,title:r.title,menu:r.subMenu,translateKey:r.translateKey})},[r.key]),e.jsxs("div",{...a,children:[e.jsx(q,{mode:y(),type:"streamline",className:H}),e.jsx(I,{autoHide:!0,direction:u,children:e.jsx(k,{className:"px-4 pb-4",variant:i,defaultActiveKeys:m||[r.key],children:_.map(s=>e.jsx(P,{authority:s.authority,userAuthority:n,children:s.subMenu&&s.subMenu.length>0?e.jsx(k.MenuItem,{eventKey:s.key,className:"mb-2",onSelect:()=>j({key:s.key,title:s.title,menu:s.subMenu,translateKey:s.translateKey}),children:e.jsx("div",{className:"text-2xl",children:g[s.icon]})}):e.jsx(b,{to:s.path,className:"flex items-center h-full w-full",onClick:()=>f({key:s.key}),children:e.jsx(k.MenuItem,{eventKey:s.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:g[s.icon]})})})},s.key))})})]})},re=p=>{const{className:i,title:o,menu:h,routeKey:m,onCollapse:d,direction:n,userAuthority:l,navMode:u,...a}=p,r=()=>{d()};return e.jsxs("div",{className:w("h-full",i),...a,children:[e.jsxs("div",{className:`${V} flex items-center justify-between gap-4 pl-6 pr-4`,children:[e.jsx("h5",{className:"font-bold",children:o}),e.jsx(Z,{shape:"circle",variant:"plain",size:"sm",icon:e.jsxs(e.Fragment,{children:[n===C&&e.jsx(ee,{}),n===D&&e.jsx(te,{})]}),onClick:r})]}),e.jsx(I,{autoHide:!0,direction:n,children:e.jsx(Q,{routeKey:m,navigationTree:h,userAuthority:l,navMode:u})})]})},ie={width:$},oe=()=>{const{t:p}=F(),[i,o]=M.useState({}),[h,m]=M.useState([]),d=c(t=>t.theme.themeColor),n=c(t=>t.theme.primaryColorLevel),l=c(t=>t.theme.navMode),u=c(t=>t.theme.mode),a=c(t=>t.theme.direction),r=c(t=>t.base.common.currentRouteKey),y=c(t=>t.auth.user.authority),{larger:j}=B(),f=(t,x,R=!0)=>l===K&&R?`bg-${d}-${n} ${t}-${x}`:`${t}-${x}`,s=t=>{o(t)},N=()=>{o({}),m([])},S=t=>{m(t)},v=()=>{let t={};const x=`${-E}px`;return a===C&&(t={marginLeft:x}),a===D&&(t={marginRight:x}),t};return e.jsx(e.Fragment,{children:j.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${f("stacked-side-nav-mini",l)}`,style:ie,routeKey:r,activeKeys:h,navMode:l,userAuthority:y,mode:u,direction:a,onChange:s,onSetActiveKey:S}),e.jsx("div",{className:`stacked-side-nav-secondary ${f("stacked-side-nav-secondary",u,!1)}`,style:{width:E,...A(i)?v():{}},children:!A(i)&&e.jsx(re,{title:p(i.translateKey,i.title),menu:i.menu,routeKey:r,navMode:T,direction:a,userAuthority:y,onCollapse:N})})]})})},ae=()=>e.jsx(e.Fragment,{children:e.jsx(G,{})}),ne=()=>e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(z,{}),e.jsx(Y,{hoverable:!1})]}),at=()=>e.jsx("div",{className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[e.jsx(oe,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(U,{className:"shadow dark:shadow-2xl",headerStart:e.jsx(ae,{}),headerEnd:e.jsx(ne,{})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:e.jsx(X,{})})]})]})});export{at as default};

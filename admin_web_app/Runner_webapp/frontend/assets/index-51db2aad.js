import{ad as B,ae as H,af as F,r as i,j as e,a6 as $,q as V,ai as q}from"./index-f1a5ff0b.js";import{a as z}from"./SalesService-dea87ad9.js";import{A as G}from"./AdaptableCard-4119b867.js";import{T as _}from"./index-28f98aac.js";import{u as O,f as b,g as Q,a as U}from"./index-ff5affb8.js";import{y as J,z as W}from"./index.esm-699c5401.js";import{b as X,c as Y}from"./DeviceApi-169cd9bc.js";import"./Card-d39e23a6.js";import"./Badge-93ce6042.js";import"./RichTextEditor-84be8b19.js";import"./index-87490377.js";import{B as g}from"./Button-afcfcbb1.js";import{D as Z}from"./Skeleton-f6c4cf8c.js";import"./Views-545588fb.js";import"./Input-f96f5d40.js";import"./react-tooltip.min-0e1c37db.js";import"./ServiceAPI-60d60c3c.js";import"./SegmentItemOption-eeadaa43.js";import"./SvgIcon-82ce3cf9.js";import{D as ee}from"./DownloadCsv-b30d8064.js";import"./Alert-3f64b1b7.js";import"./index-995b9d48.js";import"./index-56c156a2.js";import"./index-443dcd01.js";import"./index-54792e3d.js";import"./FormItem-abebf158.js";import"./index-a40ab2e0.js";import"./index-e038d582.js";import{t as N,N as L}from"./toast-a2d3b2a8.js";import"./index-8424e2af.js";import"./ScrollBar-f45e915f.js";import"./index-3e2b7b09.js";import"./Select-894eed33.js";import"./index-5a7a16fd.js";import"./Tag-85d8db80.js";import"./index-c04c0422.js";import"./Upload-c97b599f.js";import"./warning-31bbcec2.js";import"./usePopper-1dbffb61.js";import"./index-fd7e9c30.js";import"./motion-bbaf39fb.js";import"./context-07f85daf.js";import"./index-3bc265bb.js";import"./CloseButton-4410af22.js";import"./isNil-439bb3ad.js";import"./get-9c300d8d.js";import"./_MapCache-be4b2d97.js";import"./useThemeClass-a2b8f01d.js";import"./StatusIcon-7c22de5b.js";import"./useControllableState-404b8b27.js";import"./useRootClose-02fb158e.js";import"./cloneDeep-8806e7e3.js";import"./_getPrototype-4a7ee280.js";import"./chainedFunction-070f832c.js";const R="salesProductList",T=B(R+"/getProducts",async r=>(await z(r)).data),te={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},se={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:te,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},ae=H({name:`${R}/state`,initialState:se,reducers:{updateProductList:(r,a)=>{r.productList=a.payload},setTableData:(r,a)=>{r.tableData=a.payload},setFilterData:(r,a)=>{r.filterData=a.payload},toggleDeleteConfirmation:(r,a)=>{r.deleteConfirmation=a.payload},setSelectedProduct:(r,a)=>{r.selectedProduct=a.payload}},extraReducers:r=>{r.addCase(T.fulfilled,(a,n)=>{a.productList=n.payload.data,a.tableData.total=n.payload.total,a.loading=!1}).addCase(T.pending,a=>{a.loading=!0})}}),re=ae.reducer,oe=F({data:re}),{Tr:P,Th:ie,Td:le,THead:ce,TBody:ne,Sorter:de}=_,me=({setCount:r})=>{const[a,n]=i.useState([]),[E,I]=i.useState([]),[p,f]=i.useState([]),[h,k]=i.useState(""),[d,x]=i.useState(!0),[j,A]=i.useState(0),[M,m]=i.useState(!1),K=({row:s})=>{const t=V(),o=()=>{t(`/devices/${s._id}`)};async function u(){var c;const l=await Y(s._id);m(!1),y(),(c=l==null?void 0:l.data)!=null&&c.success?N.push(e.jsx(L,{title:"Device deleted successfully",type:"success"}),{placement:"top-center"}):N.push(e.jsx(L,{title:"Error while deleting device",type:"danger"}),{placement:"top-center"})}return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsxs(Z,{isOpen:M,onClose:()=>m(!1),children:[e.jsx("h3",{className:"mb-8",children:"Delete Device"}),e.jsxs("p",{className:"text-center text-[1.1rem] mb-6",children:["Are you sure about deleting '",s.deviceName,"' device ?"]}),e.jsxs("div",{className:"flex w-2/3 mx-auto justify-between",children:[e.jsx(g,{onClick:u,variant:"solid",color:"red",children:"Delete"}),e.jsx(g,{onClick:()=>m(!1),variant:"solid",color:"green",children:"Cancel"})]})]}),e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:o,children:e.jsx(J,{})}),e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:()=>m(!0),children:e.jsx(W,{})})]})};function y(){A(j+1)}i.useEffect(()=>{x(!0);async function s(){const o=(await X()).data;I(o.data),f(o.data),r(o.data.length),x(!1),h.toString().length>0&&v({target:{value:h}})}s()},[j]);const v=s=>{k(s.target.value);const t=E.filter(o=>{var u,l,c,C,S,D;return((u=o._id)==null?void 0:u.toLowerCase().includes(s.target.value.toLowerCase()))||""||((l=o.deviceEncryptedId)==null?void 0:l.toLowerCase().includes(s.target.value.toLowerCase()))||""||((c=o.deviceName)==null?void 0:c.toLowerCase().includes(s.target.value.toLowerCase()))||""||((C=o.deviceType)==null?void 0:C.toLowerCase().includes(s.target.value.toLowerCase()))||""||((S=o.mac)==null?void 0:S.toLowerCase().includes(s.target.value.toLowerCase()))||""||((D=o.isShared)==null?void 0:D.toString().toLowerCase().includes(s.target.value.toLowerCase()))||""});f(t)},w=O({data:p,columns:[{header:"Name",accessorKey:"deviceName",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.deviceName&&t.deviceName||"_"})}},{header:"Type",accessorKey:"deviceType",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.deviceType&&t.deviceType||"_"})}},{header:"Mac",accessorKey:"mac",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.mac&&t.mac||"_"})}},{header:"EncryptedId",accessorKey:"deviceEncryptedId",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.deviceEncryptedId&&t.deviceEncryptedId||"_"})}},{header:"_id",accessorKey:"_id",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t._id&&t._id||"_"})}},{header:"Is Shared",accessorKey:"isShared",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.isShared.toString()&&t.isShared.toString()||"_"})}},{header:"",id:"action",cell:s=>e.jsx(K,{row:s.row.original})}],state:{sorting:a},onSortingChange:n,getCoreRowModel:Q(),getSortedRowModel:U()});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:h,onChange:v,className:"border rounded-xl w-4/12 p-2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{disabled:d,onClick:y,children:"Refresh"}),e.jsx(ee,{disabled:d,fileName:"Devices",data:p})]})]}),d===!1&&e.jsxs(_,{rowsPerPage:10,children:[e.jsx(ce,{children:w.getHeaderGroups().map(s=>e.jsx(P,{children:s.headers.map(t=>e.jsx(ie,{colSpan:t.colSpan,children:t.isPlaceholder?null:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:[b(t.column.columnDef.header,t.getContext()),t.column.getCanSort()&&e.jsx(de,{sort:t.column.getIsSorted()})]})},t.id))},s.id))}),e.jsx(ne,{children:w.getRowModel().rows.map(s=>e.jsx(P,{children:s.getVisibleCells().map(t=>e.jsx(le,{children:b(t.column.columnDef.cell,t.getContext())},t.id))},s.id))})]})||e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx($,{loading:!0})}),d===!1&&p.length===0&&e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx("h1",{children:"Data not found !"})})]})};q("salesProductList",oe);const ue=()=>{const[r,a]=i.useState(0);return e.jsxs(G,{className:"h-full",bodyClass:"h-full",children:[e.jsx("div",{className:"lg:flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"mb-4 lg:mb-0",children:["All Devices List ( ",r," )"]})}),e.jsx(me,{setCount:a})]})},ht=ue;export{ht as default};

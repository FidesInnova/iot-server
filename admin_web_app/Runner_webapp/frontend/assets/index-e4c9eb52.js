import{ad as w,ae as P,af as T,ag as k,j as e,aj as L,a as C,r as g,q as A,ai as R,a6 as O}from"./index-f1a5ff0b.js";import{a as E,b as H}from"./SalesService-dea87ad9.js";import{A as M}from"./AdaptableCard-4119b867.js";import{a as I}from"./useGetDevices-5498879b.js";import{T as D}from"./index-28f98aac.js";import{u as $,f,g as B,a as z}from"./index-ff5affb8.js";import{A as d}from"./index-87490377.js";import{v as F,w as G,t as K,x as q,y as U}from"./index.esm-699c5401.js";import{u as V}from"./useThemeClass-a2b8f01d.js";import{t as _,N as W}from"./toast-a2d3b2a8.js";import{B as j}from"./Button-afcfcbb1.js";import{D as Y}from"./Skeleton-f6c4cf8c.js";import{a as J}from"./DeviceApi-169cd9bc.js";import"./Badge-93ce6042.js";import"./RichTextEditor-84be8b19.js";import"./Views-545588fb.js";import"./Input-f96f5d40.js";import"./react-tooltip.min-0e1c37db.js";import"./SegmentItemOption-eeadaa43.js";import"./SvgIcon-82ce3cf9.js";import"./Card-d39e23a6.js";import"./ServiceAPI-60d60c3c.js";import"./usePopper-1dbffb61.js";import"./warning-31bbcec2.js";import"./index-fd7e9c30.js";import"./motion-bbaf39fb.js";import"./StatusIcon-7c22de5b.js";import"./CloseButton-4410af22.js";import"./chainedFunction-070f832c.js";import"./context-07f85daf.js";import"./index-3bc265bb.js";import"./Select-894eed33.js";import"./get-9c300d8d.js";import"./_MapCache-be4b2d97.js";import"./index-56c156a2.js";import"./cloneDeep-8806e7e3.js";import"./_getPrototype-4a7ee280.js";import"./Tag-85d8db80.js";import"./isNil-439bb3ad.js";const v="salesProductList",h=w(v+"/getProducts",async t=>(await E(t)).data),Q=async t=>(await H(t)).data,X={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Z={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:X,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},S=P({name:`${v}/state`,initialState:Z,reducers:{updateProductList:(t,s)=>{t.productList=s.payload},setTableData:(t,s)=>{t.tableData=s.payload},setFilterData:(t,s)=>{t.filterData=s.payload},toggleDeleteConfirmation:(t,s)=>{t.deleteConfirmation=s.payload},setSelectedProduct:(t,s)=>{t.selectedProduct=s.payload}},extraReducers:t=>{t.addCase(h.fulfilled,(s,l)=>{s.productList=l.payload.data,s.tableData.total=l.payload.total,s.loading=!1}).addCase(h.pending,s=>{s.loading=!0})}}),{updateProductList:tt,setTableData:st,setFilterData:at,toggleDeleteConfirmation:b,setSelectedProduct:rt}=S.actions,ee=S.reducer,te=T({data:ee}),u=k,se=()=>e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center"});function ae(t){return L({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(t)}const re=({status:t})=>{switch(t){case"info":return e.jsx(d,{className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(q,{})})});case"success":return e.jsx(d,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(K,{})})});case"warning":return e.jsx(d,{className:"text-amber-600 bg-amber-100 dark:text-amber-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(G,{})})});case"danger":return e.jsx(d,{className:"text-red-600 bg-red-100 dark:text-red-100",shape:"circle",children:e.jsx("span",{className:"text-2xl",children:e.jsx(F,{})})});default:return null}},oe=t=>{const{type:s="info",title:l,children:i,onCancel:c,onConfirm:n,cancelText:o="Cancel",confirmText:r="Confirm",confirmButtonColor:a,...m}=t,p=()=>{c==null||c()},x=()=>{n==null||n()};return e.jsxs(Y,{contentClassName:"pb-0 px-0",...m,children:[e.jsxs("div",{className:"px-6 pb-6 pt-2 flex",children:[e.jsx("div",{children:e.jsx(re,{status:s})}),e.jsxs("div",{className:"ml-4 rtl:mr-4",children:[e.jsx("h5",{className:"mb-2",children:l}),i]})]}),e.jsxs("div",{className:"text-right px-6 py-3 bg-gray-100 dark:bg-gray-700 rounded-bl-lg rounded-br-lg",children:[e.jsx(j,{size:"sm",className:"ltr:mr-2 rtl:ml-2",onClick:p,children:o}),e.jsx(j,{size:"sm",variant:"solid",color:a,onClick:x,children:r})]})]})},le=()=>{const t=C(),s=u(o=>o.salesProductList.data.deleteConfirmation),l=u(o=>o.salesProductList.data.selectedProduct),i=u(o=>o.salesProductList.data.tableData),c=()=>{t(b(!1))},n=async()=>{t(b(!1)),await Q({id:l})&&(t(h(i)),_.push(e.jsx(W,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Product successfuly deleted"}),{placement:"top-center"}))};return e.jsx(oe,{isOpen:s,type:"danger",title:"Delete product",confirmButtonColor:"red-600",onClose:c,onRequestClose:c,onCancel:c,onConfirm:n,children:e.jsx("p",{children:"Are you sure you want to delete this product? All record related to this product will be deleted as well. This action cannot be undone."})})},ce=({row:t})=>{C(),V();const s=A(),l=()=>{s(`/devices/${t._id}`)};return e.jsx("div",{className:"flex justify-end text-lg",children:e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:l,children:e.jsx(U,{})})})},ne=({row:t})=>{const s=e.jsx(d,{icon:e.jsx(ae,{})});return e.jsxs("div",{className:"flex items-center",children:[s,e.jsx("span",{className:"ml-2 rtl:mr-2 font-semibold",children:t.deviceName})]})},{Tr:y,Th:ie,Td:de,THead:ue,TBody:me,Sorter:pe}=D,xe=()=>{const[t,s]=g.useState([]),[l,i]=g.useState([]),{_id:c}=u(r=>r.auth.user);g.useEffect(()=>{async function r(){const a=await J(c||"");i(a==null?void 0:a.data.data)}r()},[]);const o=$({data:l,columns:[{header:"Name",accessorKey:"deviceName",cell:r=>{const a=r.row.original;return e.jsx(ne,{row:a})}},{header:"Device Type",accessorKey:"deviceType",cell:r=>{const a=r.row.original;return e.jsx("span",{className:"capitalize",children:a.deviceType})}},{header:"Use Cost",accessorKey:"costOfUse",cell:r=>{const{costOfUse:a}=r.row.original;return e.jsxs("span",{children:["$",a]})}},{header:"Creation Date",accessorKey:"insertDate",enableSorting:!1,cell:r=>{const a=new Date(r.row.original.insertDate),m=a.getFullYear(),p=a.getMonth()+1,x=a.getDate(),N=`${m}-${p.toString().padStart(2,"0")}-${x.toString().padStart(2,"0")}`;return e.jsx("span",{children:N})}},{header:"",id:"action",cell:r=>e.jsx(ce,{row:r.row.original})}],state:{sorting:t},onSortingChange:s,getCoreRowModel:B(),getSortedRowModel:z()});return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx(ue,{children:o.getHeaderGroups().map(r=>e.jsx(y,{children:r.headers.map(a=>e.jsx(ie,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsxs("div",{className:a.column.getCanSort()?"cursor-pointer select-none":"",onClick:a.column.getToggleSortingHandler(),children:[f(a.column.columnDef.header,a.getContext()),a.column.getCanSort()&&e.jsx(pe,{sort:a.column.getIsSorted()})]})},a.id))},r.id))}),e.jsx(me,{children:o.getRowModel().rows.slice(0,10).map(r=>e.jsx(y,{children:r.getVisibleCells().map(a=>e.jsx(de,{children:f(a.column.columnDef.cell,a.getContext())},a.id))},r.id))})]}),e.jsx(le,{})]})};R("salesProductList",te);const ge=()=>{const{status:t}=I(),s=t!=="success";return s?e.jsx(O,{loading:s}):e.jsxs(M,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Device List"}),e.jsx(se,{})]}),e.jsx(xe,{})]})},ot=ge;export{ot as default};

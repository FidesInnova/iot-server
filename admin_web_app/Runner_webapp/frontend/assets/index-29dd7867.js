import{ad as H,ae as B,af as I,r as i,j as e,a6 as V,ai as z}from"./index-f1a5ff0b.js";import{a as G}from"./SalesService-dea87ad9.js";import{A as O}from"./AdaptableCard-4119b867.js";import{T as A}from"./index-28f98aac.js";import{u as Q,f as T,g as q,a as Y}from"./index-ff5affb8.js";import{b as J,c as W}from"./UserApi-23221c36.js";import"./Card-d39e23a6.js";import"./Badge-93ce6042.js";import"./RichTextEditor-84be8b19.js";import{o as X,z as Z}from"./index.esm-699c5401.js";import{A as ee}from"./index-87490377.js";import{B as x}from"./Button-afcfcbb1.js";import{D as te}from"./Skeleton-f6c4cf8c.js";import"./Views-545588fb.js";import"./Input-f96f5d40.js";import"./react-tooltip.min-0e1c37db.js";import"./ServiceAPI-60d60c3c.js";import"./SegmentItemOption-eeadaa43.js";import"./SvgIcon-82ce3cf9.js";import{D as ae}from"./DownloadCsv-b30d8064.js";import"./Alert-3f64b1b7.js";import"./index-995b9d48.js";import"./index-56c156a2.js";import"./index-443dcd01.js";import"./index-54792e3d.js";import"./FormItem-abebf158.js";import"./index-a40ab2e0.js";import"./index-e038d582.js";import{t as U,N as P}from"./toast-a2d3b2a8.js";import"./index-8424e2af.js";import"./ScrollBar-f45e915f.js";import"./index-3e2b7b09.js";import"./Select-894eed33.js";import"./index-5a7a16fd.js";import"./Tag-85d8db80.js";import"./index-c04c0422.js";import"./Upload-c97b599f.js";import"./warning-31bbcec2.js";import"./usePopper-1dbffb61.js";import"./index-fd7e9c30.js";import"./motion-bbaf39fb.js";import"./context-07f85daf.js";import"./index-3bc265bb.js";import"./CloseButton-4410af22.js";import"./isNil-439bb3ad.js";import"./get-9c300d8d.js";import"./_MapCache-be4b2d97.js";import"./useThemeClass-a2b8f01d.js";import"./StatusIcon-7c22de5b.js";import"./useControllableState-404b8b27.js";import"./useRootClose-02fb158e.js";import"./cloneDeep-8806e7e3.js";import"./_getPrototype-4a7ee280.js";import"./chainedFunction-070f832c.js";const M="salesProductList",R=H(M+"/getProducts",async r=>(await G(r)).data),se={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:se,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},oe=B({name:`${M}/state`,initialState:re,reducers:{updateProductList:(r,s)=>{r.productList=s.payload},setTableData:(r,s)=>{r.tableData=s.payload},setFilterData:(r,s)=>{r.filterData=s.payload},toggleDeleteConfirmation:(r,s)=>{r.deleteConfirmation=s.payload},setSelectedProduct:(r,s)=>{r.selectedProduct=s.payload}},extraReducers:r=>{r.addCase(R.fulfilled,(s,l)=>{s.productList=l.payload.data,s.tableData.total=l.payload.total,s.loading=!1}).addCase(R.pending,s=>{s.loading=!0})}}),ie=oe.reducer,le=I({data:ie}),{Tr:$,Th:ne,Td:ce,THead:de,TBody:me,Sorter:ue}=A;function pe(r){const s=new Date(r),l=s.getUTCFullYear(),g=String(s.getUTCMonth()+1).padStart(2,"0"),h=String(s.getUTCDate()).padStart(2,"0"),c=String(s.getUTCHours()).padStart(2,"0"),u=String(s.getUTCMinutes()).padStart(2,"0"),n=String(s.getUTCSeconds()).padStart(2,"0"),p=`${l}-${g}-${h}`,d=`${c}:${u}:${n}`;return`${p} , ${d}`}const fe=({setCount:r})=>{const[s,l]=i.useState([]),[g,h]=i.useState([]),[c,u]=i.useState([]),[n,p]=i.useState(!0),[d,k]=i.useState(""),[j,K]=i.useState(0),[E,f]=i.useState(!1),[w,_]=i.useState({}),F=({row:a})=>{async function t(){var m;const o=await W(w._id);f(!1),C(),(m=o==null?void 0:o.data)!=null&&m.success?U.push(e.jsx(P,{title:"User deleted successfully",type:"success"}),{placement:"top-center"}):U.push(e.jsx(P,{title:"Error while deleting User",type:"danger"}),{placement:"top-center"})}return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsxs(te,{isOpen:E,onClose:()=>f(!1),children:[e.jsx("h3",{className:"mb-8",children:"Delete Device"}),e.jsxs("p",{className:"text-center text-[1.1rem] mb-6",children:["Are you sure about deleting '",w.email,"' device ?"]}),e.jsxs("div",{className:"flex w-2/3 mx-auto justify-between",children:[e.jsx(x,{onClick:t,variant:"solid",color:"red",children:"Delete"}),e.jsx(x,{onClick:()=>f(!1),variant:"solid",color:"green",children:"Cancel"})]})]}),e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:()=>{_(a),f(!0)},children:e.jsx(Z,{})})]})};function C(){K(j+1)}i.useEffect(()=>{p(!0);async function a(){const o=(await J()).data;h(o.data),u(o.data),r(o.data.length),p(!1),d.toString().length>0&&S({target:{value:d}})}a()},[j]);const S=a=>{k(a.target.value);const t=g.filter(o=>{var m,D,b,N,v,L;return`${(m=o.firstName)==null?void 0:m.toLowerCase()} ${(D=o.lastName)==null?void 0:D.toLowerCase()}`.includes(a.target.value.toLowerCase())||""||((b=o._id)==null?void 0:b.toLowerCase().includes(a.target.value.toLowerCase()))||""||((N=o.email)==null?void 0:N.toLowerCase().includes(a.target.value.toLowerCase()))||""||((v=o.mobile)==null?void 0:v.toLowerCase().includes(a.target.value.toLowerCase()))||""||"Not-Verified".toLowerCase().includes(a.target.value.toLowerCase())||""||((L=o.creationDate)==null?void 0:L.toLowerCase().includes(a.target.value.toLowerCase()))||""});u(t)},y=Q({data:c,columns:[{header:"_id",accessorKey:"_id",cell:a=>{const t=a.row.original;return e.jsx("span",{children:t._id})}},{header:"profile",accessorKey:"profile",cell:a=>{const t=a.row.original;return e.jsx(ee,{className:"!w-[60px] !h-[60px] overflow-hidden border-2 border-white dark:border-gray-800 shadow-lg",size:60,shape:"circle",children:t.avatar&&e.jsx("img",{className:"allusers-profile",src:t.avatar})||e.jsx("span",{className:"text-3xl",children:e.jsx(X,{})})})}},{header:"Email",accessorKey:"email",cell:a=>{const t=a.row.original;return e.jsx("span",{children:t.email})}},{header:"First Name",accessorKey:"firstName",cell:a=>{const t=a.row.original;return t.firstName&&e.jsx("span",{children:t.firstName})}},{header:"Last Name",accessorKey:"lastName",cell:a=>{const t=a.row.original;return t.lastName&&e.jsx("span",{children:t.lastName})}},{header:"Mobile",accessorKey:"mobile",cell:a=>{const t=a.row.original;return e.jsx("span",{children:t.mobile&&t.mobile||"_"})}},{header:"status",accessorKey:"activationStatus",cell:a=>{const t=a.row.original;return e.jsx("span",{children:t.activationStatus=="active"&&"Verified"||"Not-Verified"})}},{header:"Creation Date",accessorKey:"insertDate",cell:a=>{const t=a.row.original;return e.jsx("span",{children:pe(t.insertDate)})}},{header:"",id:"action",cell:a=>e.jsx(F,{row:a.row.original})}],state:{sorting:s},onSortingChange:l,getCoreRowModel:q(),getSortedRowModel:Y()});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:d,onChange:S,className:"border rounded-xl w-4/12 p-2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{disabled:n,onClick:C,children:"Refresh"}),e.jsx(ae,{disabled:n,fileName:"Users",data:c})]})]}),n===!1&&e.jsxs(A,{rowsPerPage:10,children:[e.jsx(de,{children:y.getHeaderGroups().map(a=>e.jsx($,{children:a.headers.map(t=>e.jsx(ne,{colSpan:t.colSpan,children:t.isPlaceholder?null:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:[T(t.column.columnDef.header,t.getContext()),t.column.getCanSort()&&e.jsx(ue,{sort:t.column.getIsSorted()})]})},t.id))},a.id))}),e.jsx(me,{children:y.getRowModel().rows.map(a=>e.jsx($,{children:a.getVisibleCells().map(t=>e.jsx(ce,{children:T(t.column.columnDef.cell,t.getContext())},t.id))},a.id))})]})||e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(V,{loading:!0})}),n===!1&&c.length===0&&e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx("h1",{children:"Data not found !"})})]})};z("salesProductList",le);const ge=()=>{const[r,s]=i.useState(0);return e.jsxs(O,{className:"h-full",bodyClass:"h-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"mb-4 lg:mb-0",children:["All Users List ( ",r," )"]})}),e.jsx(fe,{setCount:s})]})},xt=ge;export{xt as default};

import{v as F,r as p,j as e}from"./index-f1a5ff0b.js";import{F as I,a as d}from"./FormItem-abebf158.js";import{I as C}from"./Input-f96f5d40.js";import{B as P}from"./Button-afcfcbb1.js";import{A as U}from"./Alert-3f64b1b7.js";import{P as A}from"./PasswordInput-ba6fa055.js";import{u as E,A as M}from"./useTimeOutMessage-f02db729.js";import{c as k,d as h,f as N,F as R,a as H,b as w}from"./index.esm-c80e5c03.js";import"./context-07f85daf.js";import"./index-fd7e9c30.js";import"./motion-bbaf39fb.js";import"./Views-545588fb.js";import"./isNil-439bb3ad.js";import"./get-9c300d8d.js";import"./_MapCache-be4b2d97.js";import"./StatusIcon-7c22de5b.js";import"./index.esm-699c5401.js";import"./CloseButton-4410af22.js";import"./useThemeClass-a2b8f01d.js";const q=k().shape({email:h().email("Invalid email").required("Please enter your email"),password:h().required("Please enter your password"),confirmPassword:h().oneOf([N("password")],"Your passwords do not match").required("Please enter your confirm password"),captcha:h()}),v=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let r=0;r<6;r++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},$=(t,n)=>{const a=t.getContext("2d");if(!a)return;const r=5,i=25;a.clearRect(0,0,t.width,t.height),a.fillStyle="white",a.font="20px Arial",a.fillText(n,r,i);const l=a.measureText(n).width;a.strokeStyle="black",a.beginPath(),a.moveTo(r,i-8),a.lineTo(r+l,i-7),a.stroke()},B=t=>{const{disableSubmit:n=!1,className:a,signInUrl:r="/sign-in"}=t,{signUp:i}=F(),[l,g]=E(),[c,b]=p.useState(v()),[j,y]=p.useState(""),f=p.useRef(null);p.useEffect(()=>{f.current&&c&&$(f.current,c)},[c]);const S=async(o,s)=>{const{password:m,email:u}=o;s(!0);const x=await i({email:u,password:m});(x==null?void 0:x.status)==="failed"&&g("Error: User with this email exist !"),s(!1)},T=()=>{b(v())};return e.jsxs("div",{className:a,children:[l&&e.jsx(U,{showIcon:!0,className:"mb-4",type:"danger",children:l}),e.jsx(R,{initialValues:{password:"",confirmPassword:"",email:"",captcha:""},validationSchema:q,onSubmit:(o,{setSubmitting:s})=>{!n&&j===c?S(o,s):(s(!1),g("Please enter the correct CAPTCHA"))},children:({touched:o,errors:s,isSubmitting:m})=>e.jsx(H,{children:e.jsxs(I,{children:[e.jsx(d,{label:"Email",invalid:s.email&&o.email,errorMessage:s.email,children:e.jsx(w,{type:"email",autoComplete:"off",name:"email",placeholder:"Email",component:C})}),e.jsx(d,{label:"Password",invalid:s.password&&o.password,errorMessage:s.password,children:e.jsx(w,{autoComplete:"off",name:"password",placeholder:"Password",component:A})}),e.jsx(d,{label:"Confirm Password",invalid:s.confirmPassword&&o.confirmPassword,errorMessage:s.confirmPassword,children:e.jsx(w,{autoComplete:"off",name:"confirmPassword",placeholder:"Confirm Password",component:A})}),e.jsxs("div",{className:"flex w-full",children:[e.jsx("canvas",{ref:f,width:"175",height:"40"}),e.jsx(P,{variant:"default",type:"button",onClick:T,children:"Regenerate CAPTCHA"})]}),e.jsx(d,{label:"Enter CAPTCHA",invalid:s.captcha&&o.captcha,errorMessage:s.captcha,children:e.jsx(C,{type:"text",autoComplete:"off",name:"captcha",placeholder:"Enter CAPTCHA",value:j,onChange:u=>y(u.target.value)})}),e.jsx(P,{block:!0,loading:m,variant:"solid",type:"submit",children:m?"Creating Account...":"Sign Up"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{children:"Already have an account? "}),e.jsx(M,{to:r,children:"Sign in"})]})]})})})]})},L=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-1",children:"Sign Up"}),e.jsx("p",{children:"And lets get started with your free trial"})]}),e.jsx(B,{disableSubmit:!1})]}),ne=L;export{ne as default};

import{ad as F,ae as H,af as z,r as i,j as e,a6 as G,ai as Q}from"./index-f1a5ff0b.js";import{a as V}from"./SalesService-dea87ad9.js";import{A as $}from"./AdaptableCard-4119b867.js";import{T as P}from"./index-28f98aac.js";import{u as q,f as b,g as O,a as U}from"./index-ff5affb8.js";import{z as J}from"./index.esm-699c5401.js";import"./Card-d39e23a6.js";import"./Badge-93ce6042.js";import"./RichTextEditor-84be8b19.js";import"./index-87490377.js";import{B as p}from"./Button-afcfcbb1.js";import{D as W}from"./Skeleton-f6c4cf8c.js";import"./Views-545588fb.js";import"./Input-f96f5d40.js";import"./react-tooltip.min-0e1c37db.js";import{c as X,d as Y}from"./ServiceAPI-60d60c3c.js";import"./SegmentItemOption-eeadaa43.js";import"./SvgIcon-82ce3cf9.js";import{D as Z}from"./DownloadCsv-b30d8064.js";import"./Alert-3f64b1b7.js";import"./index-995b9d48.js";import"./index-56c156a2.js";import"./index-443dcd01.js";import"./index-54792e3d.js";import"./FormItem-abebf158.js";import"./index-a40ab2e0.js";import"./index-e038d582.js";import{t as L,N}from"./toast-a2d3b2a8.js";import"./index-8424e2af.js";import"./ScrollBar-f45e915f.js";import"./index-3e2b7b09.js";import"./Select-894eed33.js";import"./index-5a7a16fd.js";import"./Tag-85d8db80.js";import"./index-c04c0422.js";import"./Upload-c97b599f.js";import"./warning-31bbcec2.js";import"./usePopper-1dbffb61.js";import"./index-fd7e9c30.js";import"./motion-bbaf39fb.js";import"./context-07f85daf.js";import"./index-3bc265bb.js";import"./CloseButton-4410af22.js";import"./isNil-439bb3ad.js";import"./get-9c300d8d.js";import"./_MapCache-be4b2d97.js";import"./useThemeClass-a2b8f01d.js";import"./StatusIcon-7c22de5b.js";import"./useControllableState-404b8b27.js";import"./useRootClose-02fb158e.js";import"./cloneDeep-8806e7e3.js";import"./_getPrototype-4a7ee280.js";import"./chainedFunction-070f832c.js";const R="salesProductList",I=F(R+"/getProducts",async r=>(await V(r)).data),ee={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},te={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:ee,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},se=H({name:`${R}/state`,initialState:te,reducers:{updateProductList:(r,a)=>{r.productList=a.payload},setTableData:(r,a)=>{r.tableData=a.payload},setFilterData:(r,a)=>{r.filterData=a.payload},toggleDeleteConfirmation:(r,a)=>{r.deleteConfirmation=a.payload},setSelectedProduct:(r,a)=>{r.selectedProduct=a.payload}},extraReducers:r=>{r.addCase(I.fulfilled,(a,n)=>{a.productList=n.payload.data,a.tableData.total=n.payload.total,a.loading=!1}).addCase(I.pending,a=>{a.loading=!0})}}),ae=se.reducer,re=z({data:ae}),{Tr:T,Th:oe,Td:ie,THead:le,TBody:ne,Sorter:ce}=P,de=({setCount:r})=>{const[a,n]=i.useState([]),[A,k]=i.useState([]),[u,f]=i.useState([]),[m,_]=i.useState(""),[c,g]=i.useState(!0),[h,E]=i.useState(0),[M,d]=i.useState(!1),[x,B]=i.useState({}),K=({row:s})=>{async function t(){var l;const o=await Y(x._id);d(!1),j(),(l=o==null?void 0:o.data)!=null&&l.success?L.push(e.jsx(N,{title:"Installed service deleted successfully",type:"success"}),{placement:"top-center"}):L.push(e.jsx(N,{title:"Error while deleting installed service",type:"danger"}),{placement:"top-center"})}return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsxs(W,{isOpen:M,onClose:()=>d(!1),children:[e.jsx("h3",{className:"mb-8",children:"Delete Device"}),e.jsxs("p",{className:"text-center text-[1.1rem] mb-6",children:["Are you sure about deleting '",x.email,"' device ?"]}),e.jsxs("div",{className:"flex w-2/3 mx-auto justify-between",children:[e.jsx(p,{onClick:t,variant:"solid",color:"red",children:"Delete"}),e.jsx(p,{onClick:()=>d(!1),variant:"solid",color:"green",children:"Cancel"})]})]}),e.jsx("span",{className:"cursor-pointer p-2 hover:${textTheme}",onClick:()=>{B(s),d(!0)},children:e.jsx(J,{})})]})};function j(){E(h+1)}i.useEffect(()=>{g(!0);async function s(){const o=(await X()).data;k(o.data),f(o.data),r(o.data.length),g(!1),m.toString().length>0&&S({target:{value:m}})}s()},[h]);const S=s=>{_(s.target.value);const t=A.filter(o=>{var l,w,C,y,D;return((l=o.userId)==null?void 0:l.toLowerCase().includes(s.target.value.toLowerCase()))||""||((w=o.serviceId)==null?void 0:w.toLowerCase().includes(s.target.value.toLowerCase()))||""||((C=o.activationStatus)==null?void 0:C.toLowerCase().includes(s.target.value.toLowerCase()))||""||((y=o.description)==null?void 0:y.toLowerCase().includes(s.target.value.toLowerCase()))||""||((D=o.installedServiceName)==null?void 0:D.toString().toLowerCase().includes(s.target.value.toLowerCase()))||""});f(t)},v=q({data:u,columns:[{header:"Name",accessorKey:"installedServiceName",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.installedServiceName&&t.installedServiceName||"_"})}},{header:"Description",accessorKey:"description",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.description&&t.description||"_"})}},{header:"user Id",accessorKey:"userId",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.userId&&t.userId||"_"})}},{header:"Service Id",accessorKey:"serviceId",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.serviceId&&t.serviceId||"_"})}},{header:"Activation Status",accessorKey:"activationStatus",cell:s=>{const t=s.row.original;return e.jsx("span",{children:t.activationStatus&&t.activationStatus||"_"})}},{header:"",id:"action",cell:s=>e.jsx(K,{row:s.row.original})}],state:{sorting:a},onSortingChange:n,getCoreRowModel:O(),getSortedRowModel:U()});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:m,onChange:S,className:"border rounded-xl w-4/12 p-2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{disabled:c,onClick:j,children:"Refresh"}),e.jsx(Z,{disabled:c,fileName:"InstalledServices",data:u})]})]}),c===!1&&e.jsxs(P,{rowsPerPage:10,children:[e.jsx(le,{children:v.getHeaderGroups().map(s=>e.jsx(T,{children:s.headers.map(t=>e.jsx(oe,{colSpan:t.colSpan,children:t.isPlaceholder?null:e.jsxs("div",{className:t.column.getCanSort()?"cursor-pointer select-none":"",onClick:t.column.getToggleSortingHandler(),children:[b(t.column.columnDef.header,t.getContext()),t.column.getCanSort()&&e.jsx(ce,{sort:t.column.getIsSorted()})]})},t.id))},s.id))}),e.jsx(ne,{children:v.getRowModel().rows.map(s=>e.jsx(T,{children:s.getVisibleCells().map(t=>e.jsx(ie,{children:b(t.column.columnDef.cell,t.getContext())},t.id))},s.id))})]})||e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx(G,{loading:!0})}),c===!1&&u.length===0&&e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsx("h1",{children:"Data not found !"})})]})};Q("salesProductList",re);const ue=()=>{const[r,a]=i.useState(0);return e.jsxs($,{className:"h-full",bodyClass:"h-full",children:[e.jsx("div",{className:"lg:flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"mb-4 lg:mb-0",children:["All Installed Services List ( ",r," )"]})}),e.jsx(de,{setCount:a})]})},mt=ue;export{mt as default};

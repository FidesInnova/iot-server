import{r as e,j as n,aO as de,c as D,aQ as me,aR as fe}from"./index-f1a5ff0b.js";import{i as $}from"./isNil-439bb3ad.js";import{u as q,M as te}from"./index-e038d582.js";import{A as Ce}from"./index-fd7e9c30.js";import{m as pe}from"./motion-bbaf39fb.js";import{c as K}from"./chainedFunction-070f832c.js";import{R as oe,S as re,T as xe,U as ve}from"./index.esm-699c5401.js";import{u as ge}from"./useRootClose-02fb158e.js";const J=e.createContext(null),he=J.Provider;function le(s){const r=e.useRef(null);return s||r}const V=e.createContext({}),ae=V.Provider;V.Consumer;function Z(s){const[r,b]=e.useState(!1),[l,g]=e.useState([]),[m,a]=e.useState(null),c=e.useRef(null),p=e.useCallback((t,o)=>{g(v=>[...v,{element:t,props:o}])},[]),f=e.useCallback(t=>{g(o=>o.filter(v=>{var d;return((d=v==null?void 0:v.element)==null?void 0:d.id)!==t}))},[]),x=e.useCallback(()=>{requestAnimationFrame(()=>{var t;document.activeElement!==s.current&&(c.current=document.activeElement,(t=s.current)==null||t.focus())})},[s]),u=e.useCallback(t=>{const o=l.indexOf(t);o!==-1&&(a(o),x())},[l,x]),i=e.useCallback((t,o)=>{var v;for(let d=t;d>-1&&d<l.length;d+=o)if(!((v=l[d].props)!=null&&v.disabled))return d;return null},[l]),M=e.useCallback(t=>{if($(t))a(null),x();else{let o;t===0?o=i(0,1):t===-1&&(o=i(l.length-1,-1)),$(o)||u(l[o])}},[l,u,x,i]),w=e.useCallback(()=>{b(!0),x()},[x]),E=e.useCallback(()=>{b(!1),a(null),requestAnimationFrame(()=>{var t;(t=c.current)==null||t.focus()})},[]);return{open:r,items:l,activeItemIndex:m,registerItem:p,unregisterItem:f,focusItemAt:M,openMenu:w,closeMenu:E}}const G=e.forwardRef((s,r)=>{const{children:b,activeKey:l,onSelect:g,hidden:m,placement:a,menuClass:c,...p}=s,f=le(r),x=q("menu-"),u=Z(f),i=t=>{const o=`rotateX(${t}deg)`;return a&&a.includes("center")?`${o} translateX(-50%)`:o},M={opacity:1,visibility:"visible",transform:i(0)},w={opacity:0,visibility:"hidden",transform:i(40)},E=w;return n.jsx(he,{value:{activeKey:l,onSelect:g},children:n.jsx(ae,{value:u,children:n.jsx(Ce,{mode:"wait",children:!m&&n.jsx(pe.ul,{ref:f,id:x,initial:E,animate:M,exit:w,transition:{duration:.15,type:"tween"},className:c,...p,children:b})})})})});G.displayName="DropdownInnerMenu";const X=e.createContext(null);X.Provider;X.Consumer;const{DEFAULT:be,DIVIDER:se,HEADER:W,CUSTOM:Y}=me,ee=e.forwardRef((s,r)=>{const{asElement:b="li",children:l,active:g,disabled:m,className:a,submenu:c,style:p,eventKey:f,onClick:x,onSelect:u,variant:i=be,...M}=s,{mode:w,direction:E}=de(),t=le(r),o=q("menu-item-"),v=e.useRef(null),d=e.useContext(X),C=e.useContext(J),_=e.useContext(V),h=Z(v),F=h.open,y=g||!$(C==null?void 0:C.activeKey)&&(C==null?void 0:C.activeKey)===f||!$(d==null?void 0:d.activeKey)&&(d==null?void 0:d.activeKey)===f,N=e.useCallback(()=>{c&&(h.openMenu(),h.focusItemAt(0))},[c,h]),H=e.useCallback(A=>{var U;u==null||u(f,A),(U=C==null?void 0:C.onSelect)==null||U.call(C,f,A)},[f,u,C]),B=e.useCallback(A=>{m||(c?N():H(A))},[m,c,N,H]),j=e.useCallback(()=>{c&&h.openMenu()},[c,h]),L=e.useCallback(()=>{c&&h.closeMenu()},[c,h]),I={onClick:K(B,x)},{registerItem:R,unregisterItem:T}=_??{};if(c&&(I.onMouseOver=j,I.onMouseOut=L),e.useEffect(()=>(i!==se&&i!==W&&(R==null||R(t.current,{disabled:m})),()=>{T==null||T(o)}),[R,T,t,o,m,i]),i===se||i===W||i===Y)return n.jsx(b,{ref:t,id:o,style:p,className:D(`menu-item-${i}`,a),...i===Y?I:{},...M,children:(i===W||i===Y)&&l});function S(){return e.isValidElement(l)?e.cloneElement(l):l}function k(){return c?n.jsx(ae,{value:h,children:e.cloneElement(c,{ref:v,hidden:!F})}):null}return c?n.jsxs("li",{...M,style:p,className:"relative",...I,children:[n.jsxs(te,{ref:t,asElement:"div",id:o,isActive:y,eventKey:f,variant:w,className:D("dropdown-submenu-item",a),children:[n.jsx("span",{children:l}),E==="rtl"?n.jsx(oe,{}):n.jsx(re,{})]}),k()]}):n.jsxs(te,{ref:t,asElement:"li",style:p,isActive:y,disabled:m,eventKey:f,variant:w,className:a,...I,...M,children:[S(),k()]})});ee.displayName="DropdownItem";const ne=e.forwardRef((s,r)=>{const{eventKey:b,title:l,className:g,placement:m,...a}=s,c=e.useContext(J),p="dropdown-menu",x=D(p,m,g),u=D(p,"dropdown-submenu"),i=n.jsx(G,{ref:r,className:u,placement:m,...a});if(c){const M=D(g);return n.jsx(ee,{className:M,submenu:i,eventKey:b,children:l})}return n.jsx(G,{ref:r,className:x,placement:m,...a})});ne.displayName="DropdownMenu";const Me=({placement:s,children:r})=>s&&s.includes("middle-start")?n.jsxs(n.Fragment,{children:[r,n.jsx(re,{})]}):s&&s.includes("middle-end")?n.jsxs(n.Fragment,{children:[n.jsx(oe,{}),r]}):s&&s.includes("top")?n.jsxs(n.Fragment,{children:[r,n.jsx(xe,{})]}):n.jsxs(n.Fragment,{children:[r,n.jsx(ve,{})]}),ce=e.forwardRef((s,r)=>{const{className:b,renderTitle:l,children:g,placement:m="bottom-start",disabled:a,toggleClassName:c,...p}=s,u=D("dropdown-toggle",b,c,a&&"dropdown-toggle-disabled"),i=D(u,"dropdown-toggle-default");return l?n.jsx("div",{className:u,...p,ref:r,children:l}):n.jsx("div",{ref:r,className:i,...p,children:n.jsx("span",{className:"flex items-center",children:n.jsx(Me,{placement:m,children:g})})})});ce.displayName="DropdownToggle";function z(s,r){return Array.isArray(r)?r.indexOf(s)>=0:s===r}const{BOTTOM_START:we}=fe,je="click",Ee="hover",ye="context",ie=e.forwardRef((s,r)=>{const{title:b,children:l,menuClass:g,menuStyle:m,disabled:a,renderTitle:c,placement:p=we,activeKey:f,toggleClassName:x,trigger:u="click",style:i,onClick:M,onMouseEnter:w,onMouseLeave:E,onContextMenu:t,onSelect:o,onOpen:v,onClose:d,onToggle:C,..._}=s,h=e.useRef(null),F=e.useRef(null),y=Z(h),N=y.open,H=q("dropdown-toggle-"),B=q("base-menu-"),j=e.useCallback(O=>{const P=typeof O>"u"?!N:O,Q=P?v:d;Q==null||Q(),C==null||C(P),P?y.openMenu():y.closeMenu()},[d,v,C,N,y]),L=e.useCallback(O=>{O.preventDefault(),!a&&j()},[a,j]),I=e.useCallback(()=>{a||j(!0)},[a,j]),R=e.useCallback(()=>{a||j(!1)},[a,j]),T=(O,P)=>{o==null||o(O,P),j(!1)};ge(()=>j(),{triggerTarget:F,overlayTarget:h,disabled:!N,listenEscape:!1});const S={onMouseEnter:w,onMouseLeave:E},k={onClick:M,onContextMenu:t};z(je,u)&&(k.onClick=K(L,k.onClick)),z(ye,u)&&(k.onContextMenu=K(L,t)),z(Ee,u)&&(S.onMouseEnter=K(I,w),S.onMouseLeave=K(R,E));const A=n.jsx(ce,{..._,...k,ref:F,id:H,className:x,renderTitle:c,disabled:a,placement:p,children:b}),U=n.jsx(ne,{ref:h,className:g,style:m,activeKey:f,hidden:!N,placement:p,id:B,onSelect:T,children:l});return n.jsx(X.Provider,{value:{activeKey:f},children:n.jsxs("div",{...S,ref:r,style:i,className:"dropdown",children:[A,n.jsx(V.Provider,{value:y,children:U})]})})});ie.displayName="Dropdown";const ue=ie;ue.Item=ee;ue.Menu=ne;export{ue as D};
